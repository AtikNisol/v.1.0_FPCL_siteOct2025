<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>C-Vyaz</title>

<!-- Preload PNGs -->
<link rel="preload" as="image" href="1upper.png">
<link rel="preload" as="image" href="2down.png">

<style>
  *, *::before, *::after { box-sizing: border-box; }

  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    background-color: white;
    overflow: hidden;
  }

  .center-logos {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    width: 100%;
    overflow: visible;
  }

  .logos-inner {
    width: 1080px;
    height: 1920px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
    transform-origin: center center;
  }

  .logo-wrap {
    position: relative;
    width: 972px;  /* 1080 * 0.9 */
    height: 864px; /* 960 * 0.9 */
    margin: 0;
    padding: 0;
  }

  /* Lower logo offset */
  .lower-wrap {
    transform: translateY(-100px);
  }

  .logo-img {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
    backface-visibility: hidden;
    transform: translateZ(0);
    will-change: opacity;
  }

  .gif { z-index: 2; opacity: 1; }
  .png { z-index: 1; opacity: 0; transition: opacity 0.5s linear; } /* smooth fade */
  #upperPng { pointer-events: none; }

  a.logo-link { display: block; padding: 0; margin: 0; border: none; outline: none; }
</style>
</head>

<body>
<div class="center-logos">
  <div class="logos-inner" id="logos-inner">
    <!-- Upper logo -->
    <div class="logo-wrap">
      <img id="upperGif" class="logo-img gif" src="1upperlong.gif" alt="Upper animation">
      <img id="upperPng" class="logo-img png" src="1upper.png" alt="Upper logo">
    </div>

    <!-- Lower logo (clickable) -->
    <a class="logo-link" href="https://t.me/nikitapolosin" target="_blank" rel="noopener">
      <div class="logo-wrap lower-wrap">
        <img id="lowerGif" class="logo-img gif" src="2downlong.gif" alt="Lower animation">
        <img id="lowerPng" class="logo-img png" src="2down.png" alt="Lower logo">
      </div>
    </a>
  </div>
</div>

<script>
function scaleLogos() {
  const container = document.getElementById('logos-inner');
  const viewportHeight = window.visualViewport ? window.visualViewport.height : window.innerHeight;
  const viewportWidth = window.innerWidth;

  const scale = Math.min((viewportWidth * 0.98) / 1080, (viewportHeight * 0.98) / 1920, 1);
  container.style.transform = `scale(${scale})`;

  const lowerWrap = document.querySelector('.lower-wrap');
  lowerWrap.style.transform = `translateY(${-100 * scale}px)`;
}

function preloadPNGs() {
  [document.getElementById('upperPng'), document.getElementById('lowerPng')].forEach(img => {
    if (!img.complete) {
      const tmp = new Image();
      tmp.src = img.src;
    }
  });
}

function crossfade() {
  const uGif = document.getElementById('upperGif');
  const lGif = document.getElementById('lowerGif');
  const uPng = document.getElementById('upperPng');
  const lPng = document.getElementById('lowerPng');

  // Fade PNGs in between 3.0s and 3.5s
  uPng.style.transition = 'opacity 0.5s linear';
  lPng.style.transition = 'opacity 0.5s linear';
  uPng.style.opacity = '1';
  lPng.style.opacity = '1';

  // Fade GIFs out simultaneously
  setTimeout(() => {
    uGif.style.transition = 'opacity 0.3s linear';
    lGif.style.transition = 'opacity 0.3s linear';
    uGif.style.opacity = '0';
    lGif.style.opacity = '0';
    setTimeout(() => {
      uGif.style.display = 'none';
      lGif.style.display = 'none';
    }, 400);
  }, 200);
}

window.addEventListener('DOMContentLoaded', () => {
  preloadPNGs();
  scaleLogos();

  // Trigger crossfade at 3.0 seconds (for 4s total duration)
  setTimeout(crossfade, 3000);

  window.addEventListener('resize', scaleLogos);
  if (window.visualViewport) {
    window.visualViewport.addEventListener('resize', scaleLogos);
  }
});
</script>
</body>
</html>

